(window["webpackJsonptest-proxy"]=window["webpackJsonptest-proxy"]||[]).push([[0],{0:function(e,t){e.exports=React},1:function(e,t){e.exports=styled},140:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"djc_gateway_authing_login_post",function(){return U}),n.d(a,"djc_gateway_authing_logout_delete",function(){return W}),n.d(a,"logincomm_api_v1_sign_get",function(){return J});var o,r=n(0),i=n.n(r),c=n(49),s=n.n(c),l=n(6),u=n(30),p=n(60),d=n(51),m=n(8),g=n.n(m),f=n(13),w=n(3),h=n(5),b=n.n(h),x=n(2);!function(e){e.LOGIN="1",e.IDENTITIES="2"}(o||(o={}));var y=n(1),v=n.n(y),_=v.a.div.withConfig({displayName:"styled__Wraper",componentId:"sc-19p95qv-0"})(["width:380px;background:#fff;border-radius:4px;padding:20px 40px 40px 40px;"]),j=v.a.div.withConfig({displayName:"styled__HeadTitle",componentId:"sc-19p95qv-1"})(["padding:20px 0 35px 0;margin-bottom:5px;font-size:24px;font-weight:bold;text-align:center;position:relative;color:rgba(0,0,0,0.65);"]),I=v.a.div.withConfig({displayName:"styled__ErrorTitle",componentId:"sc-19p95qv-2"})(["position:absolute;width:100%;bottom:0px;"]),C=v()(x.Form.Item).withConfig({displayName:"styled__PackFormItem",componentId:"sc-19p95qv-3"})(["&.ant-form-item{margin-bottom:20px;}"]),E=v()(x.Input).withConfig({displayName:"styled__PackInput",componentId:"sc-19p95qv-4"})([".ant-input-suffix{i{font-size:18px;color:rgba(0,0,0,0.25);}}&:hover{.ant-input-suffix{i{color:#40a9ff;}}}"]),O=v()(x.Button).withConfig({displayName:"styled__PackButton",componentId:"sc-19p95qv-5"})(["&.ant-btn{height:38px;}"]),k=v()(x.Button).withConfig({displayName:"styled__PackResetButton",componentId:"sc-19p95qv-6"})(["&.ant-btn{padding:0;min-width:0;}"]),N=v()(x.Form.Item).withConfig({displayName:"styled__OtherFormItem",componentId:"sc-19p95qv-7"})(["text-align:right;&.ant-form-item{margin-bottom:10px;}& .ant-form-item-control{line-height:29px;}"]),R=v()(x.Alert).withConfig({displayName:"styled__PackAlert",componentId:"sc-19p95qv-8"})(["&.ant-alert{padding:2px 15px 2px 37px;.ant-alert-icon{top:6.5px;}}"]),S=i.a.createContext({}),P=n(22),z=n(14),M=(n(52),n(53)),q=n.n(M),B=n(21),D=n.n(B),F=q.a.create({withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest"},paramsSerializer:function(e){return D.a.stringify(e,{arrayFormat:"repeat",allowDots:!0})}});function L(e){return function(t){return t=t||{},F(Object.assign({},{url:t.url,baseURL:e,method:t.method},t.opts))}}function G(e,t){return F.interceptors.response.use(e,t)}L("//www.gec123.com/demo-gateway");L("//registry.gec123.com");var T=L("");function U(e){return T({method:"post",url:"/djc-gateway/authing/login",opts:e})}function W(e){return T({method:"delete",url:"/djc-gateway/authing/logout",opts:e})}function J(e){return T({method:"get",url:"/logincomm/api/v1/sign",opts:e})}var H=n(54),A=n(55),K=function(e){return new Promise(function(t,n){window.confirm(e)?t(null):n()})},X=K;var Z=Object(A.createBrowserHistory)({basename:function(){var e=function(e){if(!e)return"";var t=/(.*?)(\/[^\/].*)/.exec(e);return t?t[1]?"/".concat(t[2].split("/").slice(2).join("/")):t[2]:""}("/");return"".concat("/"===e?"":e)}(),getUserConfirmation:function(e,t){X(e).then(function(){return t(!0)},function(){return t(!1)})}}),Q=Object(H.create)({history:Z,NODE_ENV:"production",useGlobalContextPlugin:!1,globalContextOpts:{appName:"test-proxy",djcGatewayBaseUrl:"//www.gec123.com/djc-gateway"},onError:function(e){console.error(e)}}),V=n(56),$=(n.n(V)()(),n(57));G(void 0,Object($.axiosSSOInterceptor)({djcGatewayBaseUrl:"//www.gec123.com/djc-gateway",dispatch:Q._store.dispatch}));G(void 0,function(e){var t;return t=e,z.a.error({message:"\u8bf7\u6c42\u9519\u8bef!",description:b()(t,"response.data.msg")||b()(t,"response.data.error")}),Promise.reject(e)});var Y=n(58),ee=n.n(Y),te=/(http(s)?:)?\/\/(?:[a-z0-9](?:[a-z0-9-_]{0,61}[a-z0-9])?(\.|:))+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/,ne=function(){var e=Object(f.a)(g.a.mark(function e(t,n,o){var r,i,c,s,l;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.djc_gateway_authing_login_post({data:D.a.stringify(Object(P.a)({username:t.account,password:ee()(t.password),identityId:t.identities,response_type:"code"},n)),headers:{Accept:"application/json"}});case 2:return r=e.sent,i=r.data,c=i.location,s=te.exec(c||""),e.prev=6,e.next=9,u=c.replace(s?new RegExp(s[0]):"",""),L()({method:"get",url:u});case 9:o?(l=window.location.origin,window.location.href="".concat(l).concat(o)):z.a.success({message:"\u767b\u5f55\u6210\u529f",description:"\u767b\u5f55\u6210\u529f\uff0c\u4f46\u56e0\u4f60\u672a\u6307\u5b9a\u8df3\u8f6c\u8def\u5f84\u9700\u8981\u60a8\u81ea\u884c\u8df3\u8f6c!"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),z.a.error({message:"\u8bf7\u6c42\u9519\u8bef",description:b()(e.t0,"response.data.error_message","\u7f51\u7edc\u9519\u8bef")});case 15:case"end":return e.stop()}var u},e,null,[[6,12]])}));return function(t,n,a){return e.apply(this,arguments)}}(),ae=x.Form.create()(function(e){var t=e.form,n=t.getFieldDecorator,a=t.validateFields,c=t.resetFields,s=Object(r.useContext)(S),l=(s.buildLoginParams,s.loginSuccessRedirectUri),u=void 0===l?"":l,p=(s.djcGatewayDomain,s.setMode),d=s.setIdentities,m=s.loginParamsRef,h=Object(r.useState)(""),y=Object(w.a)(h,2),v=y[0],P=y[1],z=Object(r.useState)(!1),M=Object(w.a)(z,2),q=M[0],B=M[1],D=Object(r.useCallback)(function(){var e=Object(f.a)(g.a.mark(function e(t){var n,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.prev=1,e.next=4,ne(t,{client_id:"plat@ZCJ",scope:"www.gpwbeta.com",redirect_uri:"https://www.gpwbeta.com/gateway/v1/login",state:JSON.stringify({client_id:"plat@ZCJ",scope:"www.gpwbeta.com",redirect_uri:"https://www.gpwbeta.com/gateway/v1/login"})},u);case 4:B(!1),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),n=b()(e.t0,"response.data.res"),B(!1),2===n?p&&(p(o.IDENTITIES),d&&d(b()(e.t0,"response.data.identities",[]))):(a=b()(e.t0,"message","\u670d\u52a1\u5668\u9519\u8bef\uff0c\u8bf7\u7a0d\u5019\u5728\u8bd5\uff01"),P(a));case 12:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),[u,p,d]),F=Object(r.useCallback)(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a(function(e,t){e||(m&&(m.current={account:b()(t,"account"),password:b()(t,"password")}),D(t))});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[a,D,m]),L=Object(r.useCallback)(function(){c()},[c]),G=Object(r.useCallback)(function(){v&&P("")},[v,P]),T=Object(r.useMemo)(function(){return i.a.createElement(x.Icon,{type:"user"})},[]),U=Object(r.useMemo)(function(){return i.a.createElement(x.Icon,{type:"lock"})},[]);return i.a.createElement(_,null,i.a.createElement(j,null,"\u6b22\u8fce\u767b\u5f55",v&&i.a.createElement(I,null,i.a.createElement(R,{message:v,type:"error",showIcon:!0}))),i.a.createElement(x.Form,{onSubmit:F},i.a.createElement(C,null,n("account",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]})(i.a.createElement(E,{suffix:T,placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",allowClear:!0,onChange:G}))),i.a.createElement(C,null,n("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]})(i.a.createElement(E,{suffix:U,type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",allowClear:!0,onChange:G}))),i.a.createElement(N,null,i.a.createElement(k,{type:"link",size:"small",onClick:L,disabled:q},"\u91cd\xa0\xa0\u7f6e")),i.a.createElement(x.Form.Item,null,i.a.createElement(O,{type:"primary",htmlType:"submit",block:!0,loading:q},"\u767b\u5f55"))))}),oe=v.a.div.withConfig({displayName:"SelectIdentities__Container",componentId:"sc-5m2peu-0"})(["padding:40px;position:relative;& .ant-btn{margin-bottom:10px;}"]),re=v()(x.Icon).withConfig({displayName:"SelectIdentities__LayoutIcon",componentId:"sc-5m2peu-1"})(["position:absolute;right:0;top:0;font-size:30px;cursor:pointer;"]),ie=function(e){var t=e.identities,n=Object(r.useContext)(S),a=n.buildLoginParams,o=n.loginParamsRef,c=n.loginSuccessRedirectUri,s=Object(r.useCallback)(function(){o&&(o.current=Object(P.a)({},o.current,{identities:t.id}),ne(o.current,a||{},c||""))},[t,o,a,c]);return i.a.createElement(x.Button,{block:!0,type:"primary",size:"small",onClick:s},t.name)},ce=function(){var e=Object(r.useContext)(S),t=e.identities,n=void 0===t?[]:t,a=e.setIdentities,c=e.setMode,s=e.loginParamsRef,l=Object(r.useCallback)(function(){c&&(c(o.LOGIN),s&&(s.current=null),a&&a([]))},[c,a,s]);return i.a.createElement(oe,null,i.a.createElement(re,{type:"close",onClick:l}),n.map(function(e){return i.a.createElement(ie,{key:e.id,identities:e})}))},se=function(){var e=Object(r.useState)(o.LOGIN),t=Object(w.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)([]),c=Object(w.a)(i,2);return{mode:n,setMode:a,identities:c[0],setIdentities:c[1],loginParamsRef:Object(r.useRef)(null)}},le=n(59),ue=n.n(le),pe=v.a.div.withConfig({displayName:"styled__MainWrapper",componentId:"d69iat-0"})(["width:100%;height:100vh;min-width:1100px;min-height:800px;box-sizing:border-box;overflow:auto;"]),de=v.a.div.withConfig({displayName:"styled__ContentWrapper",componentId:"d69iat-1"})(["box-sizing:border-box;height:100px;min-height:100%;padding-bottom:185px;"]),me=v.a.div.withConfig({displayName:"styled__LoginHead",componentId:"d69iat-2"})(["width:1100px;font-size:27px;padding:50px 0;margin:0 auto;font-weight:600;color:rgba(0,0,0,0.8);"]),ge=v.a.div.withConfig({displayName:"styled__ContentMain",componentId:"d69iat-3"})(["height:calc(100% - 140px);background-image:url(","",");background-repeat:no-repeat;background-size:cover;"],"",ue.a||""),fe=v.a.div.withConfig({displayName:"styled__ContentBox",componentId:"d69iat-4"})(["width:1100px;height:100%;margin:0 auto;position:relative;"]),we=v.a.div.withConfig({displayName:"styled__LoginFrameWrapper",componentId:"d69iat-5"})(["position:absolute;right:0;top:50%;width:380px;height:379px;overflow:auto;background:#fff;transform:translate3d(0,-50%,0);"]),he=function(e){var t=e.loginParams,n=e.loginSuccessRedirectUri,a=e.djcGatewayDomain,c=Object(r.useMemo)(function(){try{return t?JSON.parse(t):{}}catch(e){return{}}},[t]),s=se(),l=s.mode,u=s.setMode,p=s.identities,d=s.setIdentities,m=s.loginParamsRef,g=Object(r.useMemo)(function(){return{loginParams:t,loginSuccessRedirectUri:n,djcGatewayDomain:a,mode:l,setMode:u,identities:p,setIdentities:d,loginParamsRef:m,buildLoginParams:c}},[t,n,a,l,u,p,d,m,c]);return i.a.createElement(S.Provider,{value:g},i.a.createElement(pe,null,i.a.createElement(de,null,i.a.createElement(me,null,"\u5f00\u53d1\u73af\u5883\u767b\u5f55"),i.a.createElement(ge,null,i.a.createElement(fe,null,i.a.createElement(we,null,l===o.LOGIN?i.a.createElement(ae,null):i.a.createElement(ce,null)))))))},be=function(){return Object(p.a)(Q._history),i.a.createElement(l.Provider,{store:Q._store},i.a.createElement(d.Themeable,{djcGatewayBaseUrl:"//www.gec123.com/djc-gateway",colorScheme:"light"},i.a.createElement(u.Router,{history:Q._history},i.a.createElement(u.Route,{path:"/",component:he}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},2:function(e,t){e.exports=antd},21:function(e,t){e.exports=Qs},30:function(e,t){e.exports=ReactRouterDOM},49:function(e,t){e.exports=ReactDOM},50:function(e,t){e.exports=Redux},51:function(e,t){e.exports=TTSDK},53:function(e,t){e.exports=axios},54:function(e,t){e.exports=StateContainer},55:function(e,t){e.exports=History},56:function(e,t){e.exports=EventBus},57:function(e,t){e.exports=AuthSDK},59:function(e,t,n){e.exports=n.p+"static/media/login.fe706e23.jpg"},6:function(e,t){e.exports=ReactRedux},61:function(e,t,n){e.exports=n(140)}},[[61,1,2]]]);